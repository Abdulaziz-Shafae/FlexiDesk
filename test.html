<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gantt View - Project Management</title>
    <link rel="stylesheet" href="navbarStyle.css">    
    <link rel="stylesheet" href="viwesStyle.css">

    <link rel="stylesheet" href="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.css">
    <script src="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.js"></script>
</head>
<body>
    <style>
        .toolbar {
            display: flex;
            align-items: center;
            gap: 10px; /* Space between elements */
            padding: 5px;
            background-color: #f8f9fa; /* Light gray background */
            justify-content: flex-end; /* Aligns buttons to the right */
        }

        .Toolbar-btn, .zoom-btn  {
            padding: 8px 15px;
            font-size: 16px;
            background: #2c3e50;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            height: 35px;
            margin-top: 3px;
            margin-bottom: 3px;
            display: inline-block;
        }
     
        .zoom-btn {
            background: none;
            border: none;
            padding: 5px;
        }
        .zoom-btn img {
            width: 30px;
            height: 30px;
            cursor: pointer;
        }
        .zoom-btn:hover img, .Toolbar-btn:hover {
            opacity: 0.7;
        }

        
        .gantt_task_line.gantt_milestone {
            width: 16px !important; 
            height: 16px !important;
            background: #2c3e50 !important; /* Dark Blue */
            border: none;
            position: absolute;
            top: 50%;
            left: 50%;
            padding: 1px;
            margin: 4px;
            transform: translate(120%, -5%) ; 
        }


/* Priority Background Colors */
.gantt_task_line.low { background-color: #28a745 !important; }        /* Green */
.gantt_task_line.medium-low { background-color: #17a2b8 !important; } /* Blue */
.gantt_task_line.medium { background-color: #ffc107 !important; }     /* Yellow */
.gantt_task_line.high { background-color: #fd7e14 !important; }       /* Orange */
.gantt_task_line.critical { background-color: #dc3545 !important; }   /* Red */




    </style>

    <!-- Navbar -->
<div class="navbar">

    <div>
        <h2 href="#" class="logo">FlexiDesk</h2>  
    </div>

    <div>
        <a href="homePage.html" >Home</a>
        <a href="about.html" >About</a>
        <a href="test.html" >Charts</a>
        <a href="contact.html" >Contact</a>
        <a href="groupChat.html" >Chat</a>

    </div>

    <div>
    
        <button class="login-signin" onclick="window.location.href='Login.html'">Log in</button>
        <button class="login-signin" onclick="window.location.href='createAccount.html'">Sign up</button>


    <!--<div class="dark-mode">
            <label for="dark-mode-switch">Dark Mode</label>
            <div class="switch">
                <input type="checkbox" id="dark-mode-switch">
                <span class="slider"></span>
            </div>
        </div> -->

    </div>

</div> 

    <div class="main-content">
        <div class="viwes-container">
            <div class="tabs">
                <a href="ganttView.html" class="tab">Gantt</a>
                <a href="test.html" class="tab active">Gantt test</a>
                <a href="tableView.html" class="tab">Table</a>
                <a href="calenderView.html" class="tab">Calendar</a>
            </div>       
            <div class="viwes-header">
                <h1>Project Name</h1>
                <button class="add-task-btn" id="add-task-btn">+ Add Task </button>    
            </div>

            <div class="toolbar">
                <button onclick="zoomIn()" class="zoom-btn">
                    <img src="photos/in light.png" alt="Zoom In">
                </button>
                <button onclick="zoomOut()" class="zoom-btn">
                    <img src="photos/out light.png" alt="Zoom Out">
                </button>
                <select id="view-mode" class="Toolbar-btn">
                    <option value="hour">Hour</option>
                    <option value="day" selected>Day</option>
                    <option value="week">Week</option>
                    <option value="month">Month</option>
                </select>
                <button onclick="goToToday()" class="Toolbar-btn">Go to Today</button>
            </div>

            <div id="gantt_here" style="width:100%; height:500px;"></div>
        </div>
    </div>

    <script>

        // edit this for the start/end of the GAntt chart
        //0=Jan
        //11=Dec

        gantt.config.start_date = new Date(2025, 0, 1);
        gantt.config.end_date = new Date(2025, 11, 31);
        gantt.config.fit_tasks = true;

        gantt.plugins({
		    tooltip: true
        });

	    gantt.attachEvent("onGanttReady", function(){
		    var tooltips = gantt.ext.tooltips;
		    tooltips.tooltip.setViewport(gantt.$task_data);
	    });

        gantt.config.lightbox.sections = [
            { name: "text", height: 30, map_to: "text", type: "textarea", focus: true },
            { name: "type", height: 22, map_to: "type", type: "select", options: [
                { key: "task", label: "Task" },
                { key: "milestone", label: "Milestone" }
            ] },
            { name: "priority", height: 22, map_to: "priority", type: "select", options: [
                { key: 1, label: "Low" },
                { key: 2, label: "Medium-low" },
                { key: 3, label: "Medium" },
                { key: 4, label: "High" },           
                { key: 5, label: "Critical" }

            ] },
            { name: "description", height: 50, map_to: "description", type: "textarea" },
            { name: "time", height: 72, map_to: "auto", type: "duration" }
        ];
        
        gantt.locale.labels.section_text = "Name";
        gantt.locale.labels.section_priority = "Priority";
        gantt.locale.labels.section_description = "Description";

//update the coloring need working
        gantt.templates.task_class = function (start, end, task) {
            let priorityClass = "";
            switch (task.priority) {
                case 1: priorityClass = "low"; break;        // Green
                case 2: priorityClass = "medium-low"; break; // Blue
                case 3: priorityClass = "medium"; break;     // Yellow
                case 4: priorityClass = "high"; break;       // Orange
                case 5: priorityClass = "critical"; break;   // Red
                default: priorityClass = "";                 // No class if priority is not set
            }
    
            // Keep the milestone style but apply the same color as tasks
            if (task.type === "milestone") { return `gantt_milestone ${priorityClass}`; }
            
            return priorityClass;
        };

// remove the text from the milestone 
        gantt.templates.task_text = function (start, end, task) {
            if (task.type === "milestone") {
            return ""; // Hide text for milestones
            }
            return task.text; // Show text for other tasks
        };

        gantt.init("gantt_here");

// add task button , neeed to make it connected with the dhtmlx
        document.getElementById("add-task-btn").addEventListener("click", function() {
            const newTaskId = gantt.addTask({
                id: gantt.uid(),
                text: "New Task",
                start_date: gantt.date.date_to_str("%d-%m-%Y")(new Date()), // Todayâ€™s date
                duration: 5,
                progress: 0,
                type: "task",
                priority: 3 // Medium priority
            });

            gantt.updateTask(newTaskId);
        });

        
        gantt.parse({
            data: [
            { 
            id: 1, 
            text: "Task 1", 
            start_date: "01-02-2025", 
            duration: 5, 
            progress: 5, 
            type: "task",
            priority: 3, 
            description: "Initial planning phase"
            },
            { 
            id: 2, 
            text: "Milestone 1", 
            start_date: "06-02-2025", 
            duration: 0, 
            progress: 1, 
            type: "milestone", 
            parent: 1,
            priority: 5, 
            description: "First project milestone"
            },
            { 
            id: 3, 
            text: "23", 
            start_date: "06-02-2025", 
            duration: 0, 
            progress: 1, 
            type: "task", 
            priority: 5, 
            description: "First project milestone"
            }
            ]
        });
        

//zoom 
        let zoomLevels = ["hour", "day", "week", "month"];
        let currentZoom = 1;
        
        function zoomIn() {
            if (currentZoom > 0) {
                currentZoom--;
                applyZoom();
            }
        }
        
        function zoomOut() {
            if (currentZoom < zoomLevels.length - 1) {
                currentZoom++;
                applyZoom();
            }
        }
        
        function applyZoom() {
            let zoom = zoomLevels[currentZoom];
            let viewMode = document.getElementById("view-mode");
            
            if (zoom === "hour") {
                gantt.config.scale_unit = "day";
                gantt.config.date_scale = "%d %M";
                gantt.config.subscales = [{ unit: "hour", step: 1, date: "%H:%i" }];
                viewMode.value = "hour";
            } else if (zoom === "day") {
                gantt.config.scale_unit = "day";
                gantt.config.date_scale = "%d %M";
                gantt.config.subscales = [];
                viewMode.value = "day";
            } else if (zoom === "week") {
                gantt.config.scale_unit = "week";
                gantt.config.date_scale = "Week %W";
                gantt.config.subscales = [{ unit: "day", step: 1, date: "%d %M" }];
                viewMode.value = "week";
            } else if (zoom === "month") {
                gantt.config.scale_unit = "month";
                gantt.config.date_scale = "%F %Y";
                gantt.config.subscales = [{ unit: "week", step: 1, date: "Week %W" }];
                viewMode.value = "month";
            }
            
            gantt.render();
        }
//view change        
        document.getElementById("view-mode").addEventListener("change", function() {
            let mode = this.value;
            currentZoom = zoomLevels.indexOf(mode);
            applyZoom();
        });
//Today         
        function goToToday() {
            gantt.showDate(new Date());
        }




    </script>
</body>
</html>